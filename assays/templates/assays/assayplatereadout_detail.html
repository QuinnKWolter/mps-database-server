{% extends "base.html" %}
{% load static %}

{% block load %}
{#    <link href="{% static "assays/customize_admin.css" %}" rel="stylesheet" type="text/css">#}
    <script src="{% static "js/cookies.js" %}"></script>
    <script src="{% static "js/csv_functions.js" %}"></script>
    <script src="{% static "assays/plate_display.js" %}"></script>
    <script src="{% static "assays/assayplatereadout_add.js" %}"></script>
{% endblock %}

{% block breadcrumbs %}
    <li><a href="/assays/assayplatereadout/">Plate Readouts</a></li>
    <li class="active">Readout for <em>Plate-{{ object.setup.assay_plate_id }}</em></li>
{% endblock %}

{% block fluid-content %}
    <div class="container">
    <legend><h1>Plate Readout ID #{{ object.id }}</h1></legend>

    <div class="row">
        <div class="col-sm-2 lead text-right-responsive">
            <b>Setup:</b>
        </div>
        <div class="col-sm-10 lead">
            <a href="/assays/assayplatesetup/{{ object.setup.id }}">
                {{ object.setup }}
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-2 lead text-right-responsive">
            <b>Time:</b>
        </div>
        <div class="col-sm-10 lead">
            {% if object.treatment_time_length != None %}
                {{ object.treatment_time_length }} {{ object.timeunit }}
            {% else %}
                In {{ object.timeunit }}
            {% endif %}
        </div>
    </div>

    <div class="row">
        <div class="col-sm-2 lead text-right-responsive">
            <b>Start Date:</b>
        </div>
        <div class="col-sm-10 lead">
            {{ object.readout_start_time }}
        </div>
    </div>

    {% if object.notebook %}
        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Notebook:</b>
            </div>
            <div class="col-sm-10 lead">
                {{ object.notebook }}, page {{ object.notebook_page }}
            </div>
        </div>
    {% endif %}

    {% if object.notes %}
        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Notes:</b>
            </div>
            <div class="col-sm-10 lead">
                {{ object.notes }}
            </div>
        </div>
    {% endif %}

{#    {% if object.file %}#}
{#        <legend>Readout File</legend>#}
{#        <a href="/media/{{ object.file }}">File: {{ object.file }}</a>#}
{#        <br><br>#}
{#    {% endif %}#}

	{% include 'assays/data_upload_table.html' %}

    {% if object.assayplatereadoutassay_set.all %}
        <legend>Assays</legend>
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>Assay</th>
                <th>Reader</th>
                <th>Readout Unit</th>
                <th>Feature</th>
            </tr>
            </thead>
            <tbody>
            {% for assay in object.assayplatereadoutassay_set.all %}
                <tr>
                    <td>{{ assay.assay_id }}</td>
                    <td>{{ assay.reader_id }}</td>
                    <td>{{ assay.readout_unit }}</td>
                    <td>{{ assay.feature }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}
    </div>

    <div class="padded-row">
        <div hidden id="heatmap_options" class="inline-group row">
            <div class="col-sm-8">
                <div class="col-sm-2 col-lg-2">
                    <label for="assay_select">Select Assay</label>
                </div>
                <div class="col-sm-6 col-lg-4">
                    <select id="assay_select"></select>
                </div>
                <div id="time_select_row">
                    <div class="col-sm-2 col-lg-2">
                        <label for="time_select">Select Time</label>
                    </div>
                    <div class="col-sm-2 col-lg-2">
                        <select id="time_select"></select>
                    </div>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="col-xs-12">
                    <button type="button" id="data_toggle">Toggle Data Only</button>
                </div>
            </div>
        </div>

        <div id="heatmap_legend" class="large-padding-top">
            <svg width="630" height="40">
                <g>
                    <g class="legend">
                        <rect x="0" y="0" width="30" height="10" style="fill: rgb(0, 128, 0);"></rect>
                        <text fill="black" x="0" y="25">Low</text>
                    </g>
                    <g class="legend">
                        <rect x="30" y="0" width="30" height="10" style="fill: rgb(26, 140, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="60" y="0" width="30" height="10" style="fill: rgb(51, 152, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="90" y="0" width="30" height="10" style="fill: rgb(77, 164, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="120" y="0" width="30" height="10" style="fill: rgb(102, 176, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="150" y="0" width="30" height="10" style="fill: rgb(128, 188, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="180" y="0" width="30" height="10" style="fill: rgb(153, 200, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="210" y="0" width="30" height="10" style="fill: rgb(179, 212, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="240" y="0" width="30" height="10" style="fill: rgb(204, 224, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="270" y="0" width="30" height="10" style="fill: rgb(230, 236, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="300" y="0" width="30" height="10" style="fill: rgb(255, 255, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="330" y="0" width="30" height="10" style="fill: rgb(243, 230, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="360" y="0" width="30" height="10" style="fill: rgb(231, 204, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="390" y="0" width="30" height="10" style="fill: rgb(219, 179, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="420" y="0" width="30" height="10" style="fill: rgb(207, 153, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="450" y="0" width="30" height="10" style="fill: rgb(195, 128, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="480" y="0" width="30" height="10" style="fill: rgb(183, 102, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="510" y="0" width="30" height="10" style="fill: rgb(171, 77, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="540" y="0" width="30" height="10" style="fill: rgb(159, 51, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="570" y="0" width="30" height="10" style="fill: rgb(147, 26, 0);"></rect>
                    </g>
                    <g class="legend">
                        <rect x="600" y="0" width="30" height="10" style="fill: rgb(135, 0, 0);"></rect>
                        <text fill="black" x="600" y="25">High</text>
                    </g>
                </g>
            </svg>
        </div>

    {# TODO CONTRIVED REMOVE SOON #}
    <div id="flag"></div>
    </div>
{% endblock %}
