{% extends "base.html" %}
{% load static %}

{% block load %}
    <script src="{% static "assays/assay_filter.js" %}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="{% static "assays/chart_display.js" %}"></script>
{% endblock %}

{% block breadcrumbs %}
    <li class="active">Query Data</li>
{% endblock %}

{% block content %}
    <div class="row text-center padded-bottom">
        <a href="#charts" type="button" class="btn btn-xlarge btn-primary text-center submit-button" id="charts_submit">
            Show Plots
        </a>
        <a href="#inter_repro" type="button" class="btn btn-xlarge btn-primary text-center submit-button" id="repro_submit">
            Show Reproducibility
        </a>
        <a href="#filter" id="back" class="btn btn-xlarge btn-info hidden">
            <span class="glyphicon glyphicon-hand-left" aria-hidden="true"></span>
            Back to Selection
        </a>
    </div>

    <div id="filter">
    <div id="number_of_points_container" class="row text-center padded-bottom text-success">
        <h1 id="select_user_group_message" class="text-danger">Please Select at Least One MPS Model</h1>
        <h2>Number of Points: <span id="number_of_points"></span></h2>
    </div>

    <div class="row padded-bottom">
        <div class="col-md-6">
{#            <table id="id_study__matrix_item__organmodel_id__in" class="table table-striped table-hover">#}
            <table id="filter_organ_models" class="table table-striped table-hover filter-table">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>MPS Model</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
        <div class="col-md-6">
{#            <table id="id_study__group_id__in" class="table table-striped table-hover">#}
            <table id="filter_groups" class="table table-striped table-hover filter-table">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>MPS User Group</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>

    <div class="row padded-bottom">
        <div class="col-xs-6">
{#            <table id="id_study_assay__target" class="table table-striped table-hover">#}
            <table id="filter_targets" class="table table-striped table-hover filter-table">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>Target/Analyte</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
        <div class="col-xs-6">
{#            <table id="id_study_assay__target" class="table table-striped table-hover">#}
            <table id="filter_compounds" class="table table-striped table-hover filter-table">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>Compound</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>

    </div>

    <div hidden id="grouping_filtering">
        {% include 'assays/grouping_filtering.html' %}
    </div>

    <div hidden id="results">
    {% include 'assays/chart_options.html' with chart_prefix="charts" chart_title="Selected Data" %}

    {# Note indicating no data to display initially #}
    <div id="charts" class="padded-bottom">
        No data to display
    </div>

    <table id="treatment_group_table" class="table table-striped table-bordered">
        <thead id="treatment_group_head">
        </thead>
        <tbody id="treatment_group_display">
        </tbody>
    </table>

    <div id="group_display" class="container hidden-print">
        <table class="table table-bordered">
            <tbody id="group_display_body">

            </tbody>
        </table>
    </div>
    </div>

    <div hidden id="inter_repro" class="padded-bottom">

    {# TODO TODO TODO NEED GROUPING  AND FILTERING STUFF HERE TOO #}

    <div class="well">
        {# TODO TODO TODO #}
        <div class="row">
        <div class="col-md-4">
        <label class="radio-inline">
            <input type="radio" name="inter_level" id="inter_level_by_center" value="1" checked>
            By Center
        </label>
        <label class="radio-inline">
            <input type="radio" name="inter_level" id="inter_level_by_study" value="0">
            By Study
        </label>
        </div>
        <div class="col-md-4">
        <label>
            <input type="checkbox" name="initial_norm" id="initial_norm">
            Normalize by Initial Value
        </label>
        </div>
        <div class="col-md-4">
        <label>Maximum Interpolation Size
            <input id="max_interpolation_size" type="number" value="2">
        </label>
        </div>
        </div>
    </div>

    <table id='repro_table' class="display table-bordered" cellspacing="0" width="100%">

    </table>

    <div id="expanded_data">

    </div>

    <div id='clone_container'>
        <div data-id='repro-data' class='container hidden padded-bottom'>
            <div class='row'>
                <div class='col-xs-12'><h2 data-id='repro-title' class='text-center'></h2></div>
            </div>
            <div class='row' style='text-align: left;'>
                <div class='col-md-12'>
                    <h3>Reproducibility Status: <span data-id='repro-status'></span></h3>
                </div>
            </div>
            <div class='row'>
                <div class='col-md-12'>
                    <label>Selection Parameters</label>
                    <table data-id="data-table" class="table table-striped table-condensed table-bordered">
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>
            <div class='row'>
                <div class='col-md-6' data-id='item_chart'>

                </div>
                <div class='col-md-6' data-id='average_chart'>

                </div>
                <div class='col-md-6' data-id='trimmed_chart'>

                </div>
                <div class='col-md-6' data-id='nearest_chart'>

                </div>
                <div class='col-md-6' data-id='linear_chart'>

                </div>
                <div class='col-md-6' data-id='quadratic_chart'>

                </div>
                <div class='col-md-6' data-id='cubic_chart'>

                </div>
                {# This is just a buffer #}
                <div class="col-md-6"></div>
            </div>
        </div>
    </div>

    {# Just a spacer (and yes, inline styles are ugly)#}
    <div style="padding-bottom: 250px;"></div>

    <div hidden id="repro_info_table_display" class="container hidden-print bg-white ui-dialog">

    </div>

    </div>
{% endblock %}
