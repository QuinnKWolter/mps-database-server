{% extends "base.html" %}

{# TODO REQUIRES MAJOR AESTHETIC REVISION #}

{% block content %}
    <style>
    p {
        word-wrap: break-word;
    }
    </style>

    <legend>
        <h1>{{ object.name}}
        <a href="/compounds/{{ next }}" class="btn btn-primary btn-large pull-right">
            Next
            <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
        </a>
        <a href="/compounds/{{ previous }}" class="btn btn-primary btn-large pull-right">
            <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
            Previous
        </a>
        </h1>
    </legend>

    <div class="row">

        <div class="col-sm-7">
            <div class="row">
                <div class="col-sm-4 lead text-right-responsive">
                    <b>ChEMBL ID:</b>
                </div>
                <div class="col-sm-8 lead">
                    <a href="https://www.ebi.ac.uk/chembl/compound/inspect/{{ object.chemblid }}">{{ object.chemblid }}</a>
                </div>
            </div>

            {% if object.pubchemid %}
                <div class="row">
                    <div class="col-sm-4 lead text-right-responsive">
                        <b>PubChem ID:</b>
                    </div>
                    <div class="col-sm-8 lead">
                        <a href="https://pubchem.ncbi.nlm.nih.gov/compound/{{ object.pubchemid }}">{{ object.pubchemid }}</a>
                    </div>
                </div>
            {% endif %}

            <div class="row">
                <div class="col-sm-4 lead text-right-responsive">
                    <b>Molecular Formula:</b>
                </div>
                <div class="col-sm-8 lead">
                    {{ object.molecular_formula }}
                </div>
            </div>

        </div>

        <div class="col-sm-5">
            <img src="https://www.ebi.ac.uk/chembldb/compound/displayimage/{{ object.chemblid }}">
        </div>

    </div>

    {% if object.synonyms %}
        <legend>Synonyms
            <button class="btn btn-info" type="button" data-toggle="collapse"
                    data-target="#synonyms" aria-expanded="false" aria-controls="synonyms">
                Show
            </button>
        </legend>

        <div id='synonyms' class="row collapse">
            <blockquote>
                <p>
                    {{ object.synonyms }}
                </p>
            </blockquote>
        </div>
    {% endif %}

    {% if object.smiles or object.inchikey %}
        <legend>SMILES and InChI
            <button class="btn btn-info" type="button" data-toggle="collapse"
                    data-target="#smiles" aria-expanded="false" aria-controls="synonyms">
                Show
            </button>
        </legend>

        <div id='smiles' class="row collapse">
            <blockquote>
                <footer>SMILES</footer>
                <p>
                    {{ object.smiles }}
                </p>
            </blockquote>
            <blockquote>
                <footer>InChI</footer>
                <p>
                    {{ object.inchikey }}
                </p>
            </blockquote>
        </div>
    {% endif %}

    <legend>Drug/Drug-like Properties</legend>

    <div id='drug_properties'>

        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Known Drug:</b>
            </div>
            <div class="col-sm-1 lead">
                {% if object.known_drug %}
                    <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
                {% else %}
                    <span class="glyphicon glyphicon-remove text-danger" aria-hidden="true"></span>
                {% endif %}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>Med Chem Friendly:</b>
            </div>
            <div class="col-sm-1 lead">
                {% if object.medchem_friendly %}
                    <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
                {% else %}
                    <span class="glyphicon glyphicon-remove text-danger" aria-hidden="true"></span>
                {% endif %}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>Passes of Rule of 3:</b>
            </div>
            <div class="col-sm-1 lead">
                {% if object.ro3_passes %}
                    <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
                {% else %}
                    <span class="glyphicon glyphicon-remove text-danger" aria-hidden="true"></span>
                {% endif %}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>Rule of 5 Violations:</b>
            </div>
            <div class="col-sm-1 lead text-danger">
                {{ object.ro5_violations }}
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Molecular Species:</b>
            </div>
            <div class="col-sm-10 lead">
                {{ object.species }}
            </div>
        </div>

{#        <div class="col-sm-12">#}
{#            <p><b>Known Drug:</b> {{ object.known_drug }}</p>#}
{#            <p><b>Med Chem Friendly:</b> {{ object.medchem_friendly }}</p>#}
{#            <p><b>Passes of Rule of 3:</b> {{ object.ro3_passes }}</p>#}
{#            <p><b>Rule of 5 Violations:</b> {{ object.ro5_violations }}</p>#}
{#            <p><b>Molecular Species:</b> {{ object.species }}</p>#}
{#        </div>#}

    </div>

    <legend>Molecular Properties</legend>

    <div id='molecular_properties'>

        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Molecular Weight:</b>
            </div>
            <div class="col-sm-2 lead">
                {{ object.molecular_weight }}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>Rotatable Bonds:</b>
            </div>
            <div class="col-sm-6 lead">
                {{ object.rotatable_bonds }}
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Acidic pKa:</b>
            </div>
            <div class="col-sm-2 lead">
                {{ object.acidic_pka }}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>Basic pKa:</b>
            </div>
            <div class="col-sm-6 lead">
                {{ object.basic_pka }}
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>LogP:</b>
            </div>
            <div class="col-sm-2 lead">
                {{ object.logp }}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>LogD:</b>
            </div>
            <div class="col-sm-2 lead">
                {{ object.logd }}
            </div>

            <div class="col-sm-2 lead text-right-responsive">
                <b>ALogP:</b>
            </div>
            <div class="col-sm-2 lead">
                {{ object.alogp }}
            </div>
        </div>
    </div>

    {% if object.compoundproperty_set.all %}
        <legend>Additional Properties</legend>
        <table class="table table-striped table-bordered" style="width: auto;">
            <tbody>
            {% for property in object.compoundproperty_set.all %}
                <tr>
                    <td><strong>{{ property.property }}</strong></td>
                    <td>{{ property.value }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if object.compoundsummary_set.all %}
        <legend>Summary</legend>
        <table class="table table-striped table-bordered">
            <tbody>
            {% for summary in object.compoundsummary_set.all %}
                <tr>
                    <td><strong>{{ summary.summary_type }}</strong></td>
                    <td>{{ summary.summary }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

{% endblock %}
