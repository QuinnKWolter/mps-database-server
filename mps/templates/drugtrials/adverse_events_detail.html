{% extends "base.html" %}
{% load staticfiles %}

{% block content %}

    <legend>
        <h1>Adverse Events for
            <br>
            <a href="/compounds/{{ compound.compound.id }}">{{ compound }}</a>
        <a href="/adverse_events/{{ next }}" class="btn btn-primary btn-large pull-right">
            <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
            Next
        </a>
        <a href="/adverse_events/{{ previous }}" class="btn btn-primary btn-large pull-right">
            <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
            Previous
        </a>
        </h1>
    </legend>

    <div class="row">

        <div class="col-sm-9">
            <div class="row">
                <div class="col-sm-4 lead text-right-responsive">
                    <b>ChEMBL ID:</b>
                </div>
                <div class="col-sm-8 lead">
                    <a href="https://www.ebi.ac.uk/chembl/compound/inspect/{{ compound.compound.chemblid }}">{{ compound.compound.chemblid }}</a>
                </div>
            </div>

            {% if compound.compound.pubchemid %}
                <div class="row">
                    <div class="col-sm-4 lead text-right-responsive">
                        <b>PubChem ID:</b>
                    </div>
                    <div class="col-sm-8 lead">
                        <a href="https://pubchem.ncbi.nlm.nih.gov/compound/{{ compound.compound.pubchemid }}">{{ compound.compound.pubchemid }}</a>
                    </div>
                </div>
            {% endif %}

        </div>

        <div class="col-sm-3">
            <img src="https://www.ebi.ac.uk/chembldb/compound/displayimage/{{ compound.compound.chemblid }}">
        </div>

    </div>


    {% if compound.warnings %}
        <legend>
            Warnings

            {% if compound.black_box %}
                <span title="This compound has a Black Box Warning" class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            {% endif %}

            <button class="btn btn-info" type="button" data-toggle="collapse"
                data-target="#warnings" aria-expanded="false" aria-controls="warnings">
                Show
            </button>
        </legend>

        <div id="warnings" class="row collapse">
            <blockquote>
                <p>
                    {{ compound.warnings }}
                </p>
            </blockquote>
        </div>
    {% endif %}

    {% if compound.nonclinical_toxicology %}
        <legend>
            Nonclinical Toxicology

            <button class="btn btn-info" type="button" data-toggle="collapse"
                data-target="#nonclinical_toxicology" aria-expanded="false" aria-controls="nonclinical_toxicology">
                Show
            </button>
        </legend>

        <div id="nonclinical_toxicology" class="row collapse">
            <blockquote>
                <p>
                    {{ compound.nonclinical_toxicology }}
                </p>
            </blockquote>
        </div>
    {% endif %}

    <legend><b>Reported Events</b></legend>

    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Event</th>
                <th>Frequency</th>
            </tr>
        </thead>
        <tbody>
        {% for adverse_event in events %}
            <tr>
                <td><a href="https://en.wikipedia.org/wiki/{{ adverse_event.event|lower }}">{{ adverse_event.event }}</a></td>
                <td>{{ adverse_event.frequency }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}
