{% extends "base.html" %}
{% load static %}

{% block load %}
    <script src="{% static "js/cookies.js" %}"></script>
{#    <script src="{% static "js/csv_functions.js" %}"></script>#}
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="{% static "assays/assaychipreadout_add.js" %}"></script>
    <script src="{% static "assays/chart_display.js" %}"></script>
{% endblock %}

{% block breadcrumbs %}
    <li><a href="/assays/assaychipreadout/">Chip Readouts</a></li>
    <li class="active">Readout for <em>Chip-{{ object.chip_setup.assay_chip_id }}</em></li>
{% endblock %}

{% block content %}
    <legend><h1>Chip Readout ID #{{ object.id }}</h1></legend>

    <div class="row">
        <div class="col-sm-2 lead text-right-responsive">
            <b>Setup:</b>
        </div>
        <div class="col-sm-10 lead">
            <a href="/assays/assaychipsetup/{{ object.chip_setup.id }}">
                {{ object.chip_setup }}
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-2 lead text-right-responsive">
            <b>Time:</b>
        </div>
        <div class="col-sm-10 lead">
            {% if object.treatment_time_length != None %}
                {{ object.treatment_time_length }} {{ object.timeunit }}
            {% else %}
                In {{ object.timeunit }}
            {% endif %}
        </div>
    </div>

    <div class="row">
        <div class="col-sm-2 lead text-right-responsive">
            <b>Start Date:</b>
        </div>
        <div class="col-sm-10 lead">
            {{ object.readout_start_time }}
        </div>
    </div>

    {% if object.notebook %}
        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Notebook:</b>
            </div>
            <div class="col-sm-10 lead">
                {{ object.notebook }}, page {{ object.notebook_page }}
            </div>
        </div>
    {% endif %}

    {% if object.notes %}
        <div class="row">
            <div class="col-sm-2 lead text-right-responsive">
                <b>Notes:</b>
            </div>
            <div class="col-sm-10 lead">
                {{ object.notes }}
            </div>
        </div>
    {% endif %}

{#    {% if object.file %}#}
{#        <legend>Readout File</legend>#}
{#        <a href="/media/{{ object.file }}">File: {{ object.file }}</a>#}
{#        <br><br>#}
{#    {% endif %}#}

	{% include 'assays/data_upload_table.html' %}

{#    {% if object.assaychipreadoutassay_set.all %}#}
{#        <legend>Assays</legend>#}
{#        <table class="table table-striped">#}
{#            <thead>#}
{#            <tr>#}
{#                <th>Assay</th>#}
{#                <th>Object of Interest</th>#}
{#                <th>Reader</th>#}
{#                <th>Readout Unit</th>#}
{#            </tr>#}
{#            </thead>#}
{#            <tbody>#}
{#            {% for assay in object.assaychipreadoutassay_set.all %}#}
{#                <tr>#}
{#                    <td>{{ assay.assay_id }}</td>#}
{#                    <td>{{ assay.get_object_type_display }}</td>#}
{#                    <td>{{ assay.reader_id }}</td>#}
{#                    <td>{{ assay.readout_unit }}</td>#}
{#                </tr>#}
{#            {% endfor %}#}
{#            </tbody>#}
{#        </table>#}
{#    {% endif %}#}

    {% if object.chip_setup.assay_run_id.assayinstance_set.all %}
        <legend>Assays</legend>
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>Target/Analyte</th>
                <th>Method/Kit</th>
                <th>Readout Unit</th>
            </tr>
            </thead>
            <tbody>
            {% for assay in object.chip_setup.assay_run_id.assayinstance_set.all %}
                <tr>
                    <td>{{ assay.target }}</td>
                    <td>{{ assay.method }}</td>
                    <td>{{ assay.unit }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% include 'assays/chart_options.html' with chart_prefix="charts" chart_title="Current Data" %}

    <div id="extra" align="center">
{#        <div id="csv_table" style="width: 55%;float: left;">#}
        <div id="csv_table" class="col-sm-12 col-md-7">
            <table class="data-table">
                <thead>
                    <tr class="bg-info">
{#                        <th>Chip ID</th>#}
{#                        <th>Time</th>#}
{#                        <th>Time Unit</th>#}
{#                        <th>Assay</th>#}
{#                        <th>Sample Location</th>#}
{#                        <th>Value</th>#}
{#                        <th>Value Unit</th>#}
{#                        <th>QC Status</th>#}
{#                        <th></th>#}
                        <th>Chip ID</th>
{#                        <th>Assay Plate ID</th>#}
{#                        <th>Assay Well ID</th>#}
                        <th>Time</th>
                        <th>Target Analyte</th>
                        <th>Method Kit</th>
                        <th>Sample Location</th>
                        <th>Value</th>
                        <th>Value Unit</th>
                        <th>QC Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="table_body">
                </tbody>
            </table>
        </div>
        <div id="charts" class="col-sm-12 col-md-5"></div>
{#        <div id="charts" style="width: 42.5%;float: right;"></div>#}
    </div>

{#    <div id="assaychipreadoutassay_set-group"></div>#}
{##}
{#    <br><br>#}
{% endblock %}
