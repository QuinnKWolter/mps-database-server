{% extends "base.html" %}
{% load static %}

{% block load %}
    {# TODO REVISE #}
    <link href="{% static "assays/customize_admin.css" %}" rel="stylesheet" type="text/css">
    <script src="{% static "js/image_display.js" %}"></script>
    <script src="{% static "js/enter_override.js" %}"></script>
    <script src="{% static "microdevices/layout.js" %}"></script>
    <script src="{% static "microdevices/microdevice_add.js" %}"></script>
{% endblock %}

{% block breadcrumbs %}
    <li><a href="/microdevices/device">Devices</a></li>
    <li class="active">
        {% if object %}
            Edit <em>{{ object }}</em>
        {% else %}
            Add Device
        {% endif %}
    </li>
{% endblock %}

{# TODO needs image preview and layout display #}
{% block content %}
{% if update %}
<form onsubmit="return confirm('Are you sure you want to overwrite this entry?');" class="form-horizontal" method="post" enctype="multipart/form-data">

<h1>
    Edit <em>{{ object }}</em>
{% else %}
<form class="form-horizontal" method="post" enctype="multipart/form-data">

<h1>
    Add Device
{% endif %}
<br>
{% csrf_token %}
</h1>

{% include "submit.html" %}

{% include 'errors.html' %}

{% include 'tracking.html' %}

<legend>Microdevice</legend>

{% include 'generic_field.html' with field=form.device_type label="Device Type*" %}

{% include 'generic_field.html' with field=form.device_name label="Device Name*" %}

{% include 'generic_field.html' with field=form.barcode label="Barcode" %}

{% include 'generic_field.html' with field=form.center label="Center" %}

{% include 'generic_field.html' with field=form.manufacturer label="Manufacturer" %}

{% include 'generic_field.html' with field=form.organ label="Organ" %}

{% include 'generic_field.html' with field=form.description label="Description" %}

{% include 'generic_field.html' with field=form.device_image label="Device Image" %}

<div id="device_image_display">
    <div id="device_current_display">
        {% if object.device_image %}
            <img class="img-responsive center-block padded-bottom" src="/media/{{ object.device_image }}">
        {% endif %}
    </div>
</div>

{% include 'generic_field.html' with field=form.device_cross_section_image label="Device Cross Section Image" %}

<div id="cross_section_image_display">
    <div id="cross_section_current_display">
        {% if object.device_cross_section_image %}
            <img class="img-responsive center-block padded-bottom" src="/media/{{ object.device_cross_section_image }}">
        {% endif %}
    </div>
</div>

<legend>Dimensions</legend>

<div class="form-group">
    <label for="device_width" class="col-sm-2 control-label">Width (mm)</label>
    <div class="col-sm-2">
        {{ form.device_width }}
    </div>
    <label for="device_length" class="col-sm-2 control-label">Length (mm)</label>
    <div class="col-sm-2">
        {{ form.device_length }}
    </div>
    <label for="device_thickness" class="col-sm-2 control-label">Thickness (mm)</label>
    <div class="col-sm-2">
        {{ form.device_thickness }}
    </div>
</div>

<div class="form-group">
    <label for="substrate_material" class="col-sm-2 col-md-2 control-label">Substrate Material</label>
    <div class="col-sm-3 col-md-2">
        {{ form.substrate_material }}
     </div>
    <label for="substrate_thickness" class="col-sm-3 col-md-2 control-label">Substrate Thickness (mm)</label>
    <div class="col-sm-4 col-md-6">
        {{ form.substrate_thickness }}
    </div>
</div>

<div class="form-group">
    <label for="device_fluid_volume" class="col-sm-2 control-label">Fluid Volume (Î¼L)</label>
    <div class="col-sm-10">
        {{ form.device_fluid_volume }}
     </div>
</div>

<legend>Layout</legend>

<div class="form-group">
    <label for="number_of_rows" class="col-sm-2 col-md-2 control-label">Number of Rows</label>
    <div class="col-sm-3 col-md-2">
        {{ form.number_of_rows }}
     </div>
    <label for="number_of_columns" class="col-sm-3 col-md-2 control-label">Number of Columns</label>
    <div class="col-sm-4 col-md-6">
        {{ form.number_of_columns }}
    </div>
</div>

<div class="form-group">
    <label for="row_labels" class="col-sm-2 col-md-2 control-label">Row Labels</label>
    <div class="col-sm-3 col-md-2">
        {{ form.row_labels }}
     </div>
    <label for="column_labels" class="col-sm-3 col-md-2 control-label">Column Labels</label>
    <div class="col-sm-4 col-md-6">
        {{ form.column_labels }}
    </div>
</div>

<div id="layout_display"></div>

<br>
{% endblock %}
