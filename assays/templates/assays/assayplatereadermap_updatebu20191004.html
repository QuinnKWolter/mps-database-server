{% extends "base.html" %}
{% load static %}

{% block load_js %}
    <script src="{% static "js/split_time.js" %}"></script>
    <script src="{% static "assays/assayplatereadermap_update.js" %}"></script>
    <script src="{% static "assays/compound_instances.js" %}"></script>
{% endblock %}


{% block breadcrumbs %}
    <li><a href="/assays/assaystudy/">Studies</a>
    <li><a href="{{ form.instance.study.get_absolute_url }}">{{ form.instance.study }}</a></li>
    <li><a href="{% url 'assayplatereadermap-index' object.study.id %}">Assay Plate Reader Maps</a>
    <li class="active">
        {% if object %}
            <em>{{ object }}</em>
        {% else %}
            Add
        {% endif %}
    </li>
{% endblock %}

{% block content %}
    <form class="form-horizontal" method="post" enctype="multipart/form-data">
        <h1>
        {% if update %}
            Update
        {% elif detail %}
            Review
        {% else %}
            Add
        {% endif %}
        Plate Reader Map <em>{{ object }}</em>
        <br>
        {% csrf_token %}
        </h1>


        {% include "submit.html" with flag="y" creator=object.created_by.id %}

        {% include 'errors.html' %}

        {% include 'tracking.html' %}

        {% if form.errors %}
            {% for field, error in form.errors.items %}
                <div class="alert alert-danger" role="alert">
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    <span class="sr-only">Error:</span>
                    {{ error }}
                </div>
            {% endfor %}
        {% endif %}
        <br>
        {% include 'generic_field.html' with field=form.name label="Name" %}
        {% include 'generic_field.html' with field=form.description label="Description" %}
        {% include 'generic_field.html' with field=form.device label="Plate Size" %}

        {% for apmitem in assayplatereadermapitems.all|dictsort:"name" %}
            {{ apmitem.name }};
            
        {% endfor %}


    </form>
{% endblock %}
